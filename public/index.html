<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Chartbreaker</title>
	<style>
		canvas {
			border: 1px solid #ccc;
		}
	</style>
</head>
<body>
	<div class="chartbreaker">
	</div>

	<script>
		var target = document.querySelector('.chartbreaker');
		var canvas = document.createElement('canvas');
		canvas.height = 300;
		canvas.width = 400;

		var plotData = [240, 180, 220, 40];

		var rectH = 240;
		var rectH2 = 180;
		var rectW = 50 >= canvas.width / plotData.length ? canvas.width / plotData.length : 50;
		var spacer = (canvas.width - (plotData.length * rectW)) / (plotData.length + 1);

		var context = canvas.getContext('2d');
		context.fillStyle = '#ff0033';

		target.appendChild(canvas);
		context.fillRect(5, (canvas.height - rectH), rectW, rectH);
		context.fillRect((5 * 2) + rectW, (canvas.height - rectH2), rectW, rectH2);

		var generateZeroArray = function(num){
			var arry = [];
			for(var i = 0; i < num; i += 1){
				arry.push(0);
			};

			return arry;
		};

		var zeroArray = generateZeroArray(plotData.length);
		var interval = setInterval(function(){

			context.clearRect(0, 0, canvas.width, canvas.height);
			plotData.forEach(function(plot, idx){
				var newPlot = zeroArray[idx] >= plotData[idx] ? plotData[idx] : zeroArray[idx] += 1;
				var xpos = idx > 0 ? (spacer * (idx + 1)) + (rectW * idx) : spacer;
				context.fillRect(xpos, (canvas.height - newPlot), rectW, newPlot);
			});
		}, 5);
	</script>
</body>
</html>
